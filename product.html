<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Product Detail | Pure Banana India</title>
</head>
<body>
    <div class="container">
        <h1>Banana Powder</h1>
        <p>Price: â‚¹900</p>
        
        <form id="orderForm">
            <label for="email">Email:</label>
            <input type="email" id="email" required>

            <label for="quantity">Quantity:</label>
            <input type="number" id="quantity" min="1" required>
            
            <h2>Address Details</h2>
            
            <label for="country">Country:</label>
            <select id="country" required>
                <option value="India">India</option>
                <option value="USA">USA</option>
                <option value="Canada">Canada</option>
                <option value="Australia">Australia</option>
                <option value="UK">United Kingdom</option>
            </select>

            <label for="state">State:</label>
            <select id="state" required>
                <option value="Andhra Pradesh">Andhra Pradesh</option>
                <option value="Maharashtra">Maharashtra</option>
                <option value="Karnataka">Karnataka</option>
                <option value="Tamil Nadu">Tamil Nadu</option>
                <option value="Delhi">Delhi</option>
                <option value="California">California</option>
                <option value="Texas">Texas</option>
                <option value="Ontario">Ontario</option>
                <option value="New South Wales">New South Wales</option>
                <option value="England">England</option>
            </select>

            <label for="city">City:</label>
            <select id="city" required>
                <option value="Vijayawada">Vijayawada</option>
                <option value="Guntur">Guntur</option>
                <option value="Mumbai">Mumbai</option>
                <option value="Bangalore">Bangalore</option>
                <option value="Chennai">Chennai</option>
                <option value="New York">New York</option>
                <option value="Los Angeles">Los Angeles</option>
                <option value="Toronto">Toronto</option>
                <option value="Sydney">Sydney</option>
                <option value="London">London</option>
            </select>

            <label for="doorNo">Door Number:</label>
            <input type="text" id="doorNo" required>
            
            <label for="address">Address:</label>
            <input type="text" id="address" required>
            
            <label for="phoneNumber">Phone Number:</label>
            <input type="text" id="phoneNumber" required>
            
            <button type="submit">Buy</button>
        </form>
    </div>

    <script>
        document.getElementById('orderForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            
            const orderData = {
                email: document.getElementById('email').value,
                quantity: document.getElementById('quantity').value,
                country: document.getElementById('country').value,
                state: document.getElementById('state').value,
                city: document.getElementById('city').value,
                doorNo: document.getElementById('doorNo').value,
                address: document.getElementById('address').value,
                phoneNumber: document.getElementById('phoneNumber').value
            };

            // Send order data to the backend
            const response = await fetch('https://backend-pld2.onrender.com/send-order-email', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(orderData)
            });

            const result = await response.json();
            console.log(result);
            if (result.success) {
                alert("Order confirmation email sent successfully!");
                // Redirect to order confirmation page
                window.location.href = 'index.html';
            } else {
                alert("Error sending confirmation email. Please try again.");
            }
        });
    </script>
</body>
</html>
